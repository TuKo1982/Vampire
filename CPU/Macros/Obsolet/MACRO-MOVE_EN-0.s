*******************************************************************************
*
* APOLLO-Core - SILVER 8
* 
* MOVE from/to Extended Registers 
* 
* Syntax:
* 
* CLR_E   En
* MOVE_IE #Imm,En
* MOVE_DE Dn,En
* MOVE_ED En,Dn
* 
*******************************************************************************
*
* Encodings:
* 
* MOVE.L Dn,En
* 
*   Head   En  Dir   Dn
*      4    4    4    4
*   0001 0000 0100 0000
* 
* MOVE.L En,Dn
* 
*   Head   Dn  Dir   En
*      4    4    4    4
*   0001 0000 0000 0000
* 
* MOVE.L (An),En
* 
*   Head   En  Dir (An)
*      4    4    4    4
*   0001 0000 0101 0000(+0)
* 
* MOVE.L (An)+,En
* 
*   Head   En  Dir (An)+
*      4    4    4    4
*   0001 0000 0101 0000(+8)
* 
* MOVE.L -(An),En
* 
*   Head   En  Dir -(An)
*      4    4    4    4
*   0001 0000 0110 0000
* 
* MOVE.L #Imm,En
* 
*   Head   En     Foot           Immediate 32bits value
*      4    4        8                               32
*   0001 0000 01111100 00000000000000000000000000000000
* 
*******************************************************************************

;------------------------------------------------------------------------------
; CLR_E En
;------------------------------------------------------------------------------

CLR_E	MACRO
	IF NARG=1
		MOVE_IE 0,\1
		MEXIT
	ENDC
	FAIL Incorrect number of arguments !
	ENDM

;------------------------------------------------------------------------------
; MOVE_IE #Imm,En
;------------------------------------------------------------------------------

MOVE_IE	MACRO
	IF NARG=2
		dc.b ($10|((\2)<<1)),$7C
		dc.l (\1)
		MEXIT
	ENDC
	FAIL Incorrect number of arguments !
	ENDM

;------------------------------------------------------------------------------
; MOVE_DE Dn,En
;------------------------------------------------------------------------------

MOVE_DE	MACRO
	IF NARG=2
		dc.b ($10|((\2)<<1)),($40|($00+(\1)))
		MEXIT
	ENDC
	FAIL Incorrect number of arguments !
	ENDM

;------------------------------------------------------------------------------
; MOVE_ED En,Dn
;------------------------------------------------------------------------------

MOVE_ED	MACRO
	IF NARG=2
		dc.b ($10|((\2)<<1)),($00|($08+(\1)))
		MEXIT
	ENDC
	FAIL Incorrect number of arguments !
	ENDM

;------------------------------------------------------------------------------
; MAIN PROGRAM
;------------------------------------------------------------------------------

	move.l (a0),a0
	move.l (a1),a2
	move.l -(a1),a2
	move.l (a1)+,a2
	
Main:

.test0
	
	CLR_E   3             ; clr.l e3
	stop    #1            ; e3 = $00000000
	
.test1

	MOVE_IE $11223344,3   ; move.l #$11223344,e3
	stop    #1            ; e3 = $11223344
	
.test2

	move.l  #$11223344,d2 ; d2 = $11223344
	MOVE_DE 2,3           ; move.l d2,e3
	MOVE_ED 3,0           ; move.l e3,d0
	stop    #1            ; d0 = $11223344

.end

	rts
	